const HuxtTechDealABI = require("../contactsABI/ElectionABI.json");
const TextString = require("../config/TextString");
const responseStatus = require("../config/ResponseStatus");
const conn = require("../config/db_conn");

var Web3 = require("web3");
//const ethereum = require('ethereumjs-tx');
var Tx = require("ethereumjs-tx").Transaction;
const { text } = require("body-parser");
// const web3 = new Web3(
//   new Web3.providers.HttpProvider(
//     "https://data-seed-prebsc-1-s1.binance.org:8545"
//   )
// );

let web3 = new Web3(
  new Web3.providers.HttpProvider(
    "https://kovan.infura.io/v3/9e81cde3134f40019b152fafe6d2f265"
  )
);

// const deployContract = async (req, res, next) => {
//   var HuxtABI = HuxtTechDealABI;
//   var data =
//     "0x6080604052604051604080611d678339810180604052810190808051906020019092919080519060200190929190505050806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050611ca5806100c26000396000f3006080604052600436106100af576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680633a23cc0a146100b45780636ca1608b146101625780637633a22c1461018c5780638da5cb5b1461021c578063a877f21514610273578063bc188bd1146102ca578063c3a1e5b3146102f7578063c5cc426a1461032e578063d4f125971461042a578063f76b51cf14610474578063fe28524814610566575b600080fd5b3480156100c057600080fd5b506100df60048036038101908080359060200190929190505050610586565b604051808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018481526020018381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200194505050505060405180910390f35b61018a6004803603810190808035906020019092919080359060200190929190505050610655565b005b34801561019857600080fd5b506101a161098b565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156101e15780820151818401526020810190506101c6565b50505050905090810190601f16801561020e5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561022857600080fd5b506102316109c8565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561027f57600080fd5b506102886109ed565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6102f560048036038101908080359060200190929190803560000b9060200190929190505050610a13565b005b61032c6004803603810190808035906020019092919080359060200190929190803560000b9060200190929190505050610de6565b005b34801561033a57600080fd5b5061035960048036038101908080359060200190929190505050610fb5565b604051808873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001878152602001868152602001858152602001848152602001838152602001828103825288818151815260200191508051906020019080838360005b838110156103e95780820151818401526020810190506103ce565b50505050905090810190601f1680156104165780820380516001836020036101000a031916815260200191505b509850505050505050505060405180910390f35b6104726004803603810190808035906020019092919080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611157565b005b610564600480360381019080803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919291929080359060200190929190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050611432565b005b61058460048036038101908080359060200190929190505050611a71565b005b6000806000806000806003600088815260200190815260200160002060020160009054906101000a900460ff1615156105be57600080fd5b60036000888152602001908152602001600020915060026000836000015481526020019081526020016000209050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16816002015482600501600401548360050160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16955095509550955050509193509193565b60008060006003600086815260200190815260200160002060020160009054906101000a900460ff16151561068957600080fd5b60036000868152602001908152602001600020925060026000846000015481526020019081526020016000209150600460008460000154815260200190815260200160002090508060060160000160009054906101000a900460ff16801561070257508060060160000160019054906101000a900460ff165b8061073b57508060070160000160009054906101000a900460ff16801561073a57508060070160000160019054906101000a900460ff165b5b151561074657600080fd5b3373ffffffffffffffffffffffffffffffffffffffff168260050160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415156107a757600080fd5b7f587b8bd23b43f29f1f6f1d2d4306080dbcc8f78f1ec918c6812b33001fefc990600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16868460020154878660050160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16604051808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018581526020018481526020018381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019550505050505060405180910390a16000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc83600401549081150290604051600060405180830381858888f1935050505015801561090e573d6000803e3d6000fd5b508160050160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc83600501600201549081150290604051600060405180830381858888f19350505050158015610983573d6000803e3d6000fd5b505050505050565b60606040805190810160405280600781526020017f72756e6e696e6700000000000000000000000000000000000000000000000000815250905090565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60006004600084815260200190815260200160002060080160009054906101000a900460ff161515610a4457600080fd5b3373ffffffffffffffffffffffffffffffffffffffff166004600085815260200190815260200160002060050160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161480610b1557503373ffffffffffffffffffffffffffffffffffffffff166004600085815260200190815260200160002060040160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16145b1515610b2057600080fd5b60046000848152602001908152602001600020905060018260000b1480610b4a575060028260000b145b1515610b5557600080fd5b60018260000b1415610c04573373ffffffffffffffffffffffffffffffffffffffff168160050160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610bde5760018160060160000160016101000a81548160ff021916908315150217905550610bff565b60018160060160000160006101000a81548160ff0219169083151502179055505b610ca3565b3373ffffffffffffffffffffffffffffffffffffffff168160050160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610c815760018160070160000160016101000a81548160ff021916908315150217905550610ca2565b60018160070160000160006101000a81548160ff0219169083151502179055505b5b7faa375e4da091ccff030b1bbab9ff345148b4a949b73c7556137af25c7a69057583826001018360060160000160019054906101000a900460ff168015610cfb57508360060160000160009054906101000a900460ff165b8460070160000160019054906101000a900460ff168015610d2d57508460070160000160009054906101000a900460ff165b60405180858152602001806020018415151515815260200183151515158152602001828103825285818154600181600116156101000203166002900481526020019150805460018160011615610100020316600290048015610dd05780601f10610da557610100808354040283529160200191610dd0565b820191906000526020600020905b815481529060010190602001808311610db357829003601f168201915b50509550505050505060405180910390a1505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610e4157600080fd5b60026000848152602001908152602001600020600c0160009054906101000a900460ff161515610e7057600080fd5b60018160000b1480610e85575060028160000b145b1515610e9057600080fd5b60018160000b1415610ebc57816002600085815260200190815260200160002060030181905550610f0d565b81600260008581526020019081526020016000206005016001018190555060016002600085815260200190815260200160002060050160060160006101000a81548160ff0219169083151502179055505b7faf54ca7c1ecf75ea1c151f265e9ab3eeecb27d19e8d3ec6b7e199414dd0c1ed6600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16848484604051808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018481526020018381526020018260000b60000b815260200194505050505060405180910390a1505050565b60006060600080600080600060026000898152602001908152602001600020600c0160009054906101000a900460ff161515610ff057600080fd5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600260008a8152602001908152602001600020600001600260008b815260200190815260200160002060010154600260008c815260200190815260200160002060030154600260008d815260200190815260200160002060040154600260008e815260200190815260200160002060050160010154600260008f815260200190815260200160002060050160020154858054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156111375780601f1061110c57610100808354040283529160200191611137565b820191906000526020600020905b81548152906001019060200180831161111a57829003601f168201915b505050505095509650965096509650965096509650919395979092949650565b60026000848152602001908152602001600020600c0160009054906101000a900460ff16151561118657600080fd5b3373ffffffffffffffffffffffffffffffffffffffff166000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415156111e157600080fd5b6004600084815260200190815260200160002060080160009054906101000a900460ff16151561121057600080fd5b600660008154809291906001019190505550606060405190810160405280848152602001600654815260200160011515815250600360006006548152602001908152602001600020600082015181600001556020820151816001015560408201518160020160006101000a81548160ff021916908315150217905550905050816002600085815260200190815260200160002060050160040181905550806002600085815260200190815260200160002060050160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550806004600085815260200190815260200160002060050160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507fbc1c01dc0d1e366f76a22e7db8af8028033bd0a521feaf529046a6bc413ce0f0600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600654858585604051808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018581526020018481526020018381526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019550505050505060405180910390a1505050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561148e57600080fd5b60056000815480929190600101919050555060e0604051908101604052808581526020018481526020016005548152602001600081526020016000815260200160e060405190810160405280600073ffffffffffffffffffffffffffffffffffffffff1681526020016000815260200160008152602001600073ffffffffffffffffffffffffffffffffffffffff1681526020016000815260200160008152602001600015158152508152602001600115158152506002600060055481526020019081526020016000206000820151816000019080519060200190611574929190611bd4565b506020820151816001015560408201518160020155606082015181600301556080820151816004015560a08201518160050160008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550602082015181600101556040820151816002015560608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015560c08201518160060160006101000a81548160ff021916908315150217905550505060c082015181600c0160006101000a81548160ff021916908315150217905550905050610120604051908101604052806005548152602001838152602001828152602001600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160408051908101604052806000151581526020016000151581525081526020016040805190810160405280600015158152602001600015158152508152602001600115158152506004600060055481526020019081526020016000206000820151816000015560208201518160010190805190602001906117dc929190611bd4565b5060408201518160020190805190602001906117f9929190611bd4565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060808201518160040160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060a08201518160050160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060c08201518160060160008201518160000160006101000a81548160ff02191690831515021790555060208201518160000160016101000a81548160ff021916908315150217905550505060e08201518160070160008201518160000160006101000a81548160ff02191690831515021790555060208201518160000160016101000a81548160ff02191690831515021790555050506101008201518160080160006101000a81548160ff0219169083151502179055509050507fb7e953e9d5dc29b2595c1ea82eed1d21925712de892f26dd7323f0040bf3f59c338585600554604051808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001848152602001838152602001828103825285818151815260200191508051906020019080838360005b83811015611a2e578082015181840152602081019050611a13565b50505050905090810190601f168015611a5b5780820380516001836020036101000a031916815260200191505b509550505050505060405180910390a150505050565b60026000828152602001908152602001600020600c0160009054906101000a900460ff161515611aa057600080fd5b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515611afc57600080fd5b346002600083815260200190815260200160002060050160010154600260008481526020019081526020016000206003015401141515611b3b57600080fd5b3460026000838152602001908152602001600020600401819055507f4ca09f9926d2e48ef31cb6b14dbda230c7420702b8a8f5b878dd572c593e99d233823442604051808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200184815260200183815260200182815260200194505050505060405180910390a150565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10611c1557805160ff1916838001178555611c43565b82800160010185558215611c43579182015b82811115611c42578251825591602001919060010190611c27565b5b509050611c509190611c54565b5090565b611c7691905b80821115611c72576000816000905550600101611c5a565b5090565b905600a165627a7a7230582033f0492d2b54a1d661a3358ef4f8f40f4e90814d39bb4f78017a30ec9e36e4b30029";

//   let contractAddress
//   //who is going to deploy the contract
//   let ownerPrivateKey = req.body.ownerPrivateKey;
//   let ownerPrivateKeyHex = Buffer.from(ownerPrivateKey, "hex");

//   //who want to send order their pass and walletaddr
//   let buyerPrivateKey = req.body.buyerPrivateKey;
//   let buyerPrivateKeyHex = Buffer.from(buyerPrivateKey, "hex");

//   //owner and buyer details
//   let buyerAddress = req.body.buyerAddress;
//   let ownerAddress = req.body.ownerAddress;
//   let userId = req.body.userId;

//   //buyer request product
//   let goods = req.body.goods;
//   var quantity = req.body.quantity;
//   var photoURL = req.body.photoURL;
//   var videoURL = req.body.videoURL;

//   //deploy procedure
//   var contract = new web3.eth.Contract(HuxtABI);
//   const finalData = contract.deploy({
//     data: data,
//     arguments: [buyerAddress, ownerAddress],
//   });

//   const txCount = await web3.eth.getTransactionCount(ownerAddress);

//   const txObject = {
//     nonce: web3.utils.toHex(txCount),
//     gasLimit: web3.utils.toHex(4700000), // Raise the gas limit to a much higher amount
//     gasPrice: web3.utils.toHex(web3.utils.toWei("30", "gwei")),
//     data: finalData.encodeABI(),
//   };

//   const tx = new Tx(txObject, { chain: 42 });
//   tx.sign(ownerPrivateKeyHex);

//   const serializedTx = tx.serialize();
//   const raw = "0x" + serializedTx.toString("hex");

//   await web3.eth
//     .sendSignedTransaction(raw, (err, txHash) => {
//       console.log("trax", txHash);
//       txHash = txHash;
//     })
//     .then((result) => {
//       //store the data
//       // console.log("result", result);
//       contractAddress = result.contractAddress
//       let userContractInsert =
//         "INSERT INTO user_contract_address (id,userId, contractAddress) VALUES (?);";
//       let userContractValue = [null, userId, contractAddress];
//       conn.query(
//         userContractInsert,
//         [userContractValue],
//         async (err, result, fields)  => {
//           if (err) {
//             return res.status(501).json({
//               msg: TextString.Data_Insert_Failed,
//               status: responseStatus.STATUS_BAD_GATEWAY,
//             });
//           } else {
//             console.log("contractAddress",contractAddress)
//             return await deploy(contractAddress).then(result=>{
//               return res.status(200).send({
//                 message: "Order sended successfully",
//                 data: result,
//                 status: responseStatus.STATUS_OK,
//               });
//             }).catch(er=>{
//               console.log("ERR",er)
//               return res.status(200).send({
//                 message: TextString.Order_Failed,
//                 data: null,
//                 status: responseStatus.STATUS_BAD_REQUEST,
//               });
//             })

//           }
//         }
//       );
//     })
//     .catch((err) => {
//       console.log("eror", err);
//       return res.status(200).send({
//         message: "ERROR",
//         data: null,
//         status: responseStatus.STATUS_BAD_GATEWAY,
//       });
//     });

//   async function deploy(contractAddr){
//     try {
//       console.log("RRECI",contractAddr)
//       //process order procedure
//       var contractAddress = contractAddr;
//       var initContract = new web3.eth.Contract(HuxtABI, contractAddress);

//       let checkingBuyerAddr = await initContract.methods.buyerAddr().call();
//       console.log("contractSymbol", checkingBuyerAddr);

//       const txCount = await web3.eth.getTransactionCount(buyerAddress);

//       console.log("ASdasdas", txCount);

//       const txObject = {
//         nonce: web3.utils.toHex(txCount),
//         gasLimit: web3.utils.toHex(4700000), // Raise the gas limit to a much higher amount
//         gasPrice: web3.utils.toHex(web3.utils.toWei("15", "gwei")),
//         to: contractAddress,
//         data: initContract.methods
//           .sendOrder(goods, quantity, photoURL, videoURL)
//           .encodeABI(),
//       };
//       // kovin 42, rinyby 4
//       const tx = new Tx(txObject, { chain: 42 });
//       tx.sign(buyerPrivateKeyHex);

//       const serializedTx = tx.serialize();
//       const raw = "0x" + serializedTx.toString("hex");
//       return await web3.eth
//         .sendSignedTransaction(raw)
//         // .on("OrderSent", function (error, event) {
//         //   console.log("error", error);
//         //   console.log(event);
//         // })
//         .then(function (OrderSent) {
//           console.log("OrderSent",OrderSent)
//           trxHash = OrderSent.transactionHash;
//           return OrderSent;
//           // contract.getPastEvents(
//           //   "OrderSent",
//           //   {
//           //     filter: { transactionHash: [trxHash] },
//           //   },
//           //   function (error, result) {
//           //     console.log("result",result)
//           //     if (!error) {
//           //       output.data = result;
//           //       output.msg = TextString.Order_Success;
//           //       output.status = responseStatus.STATUS_OK;
//           //     } else {
//           //       output.data = error;
//           //       output.msg = TextString.Order_Failed;
//           //       output.status = responseStatus.STATUS_NOT_FOUND;
//           //     }
//           //     return output
//           //   }
//           // );
//         });
//     } catch (error) {
//       console.log("ERROR", error);
//       res.json({ error: true, data: { message: error.message } });
//     }
//   };
// };
const deployContract = async (req, res, next) => {
  console.log("req",req.body)
  var HuxtABI = HuxtTechDealABI;
  var data =
    "0x608060405233600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000806000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506128f4806100ba6000396000f3fe6080604052600436106100e85760003560e01c8063a877f2151161008a578063d4f1259711610059578063d4f12597146102eb578063f76b51cf14610307578063f9df94f514610323578063fe2852481461034c576100e8565b8063a877f21514610245578063bc188bd114610270578063c3a1e5b31461028c578063c5cc426a146102a8576100e8565b80636ebcf607116100c65780636ebcf607146101745780637633a22c146101b15780638447e840146101dc5780638da5cb5b1461021a576100e8565b80632bf326b1146100ed5780633a23cc0a146101185780636ca1608b14610158575b600080fd5b3480156100f957600080fd5b50610102610368565b60405161010f919061220a565b60405180910390f35b34801561012457600080fd5b5061013f600480360381019061013a9190611f7c565b61038e565b60405161014f94939291906122e7565b60405180910390f35b610172600480360381019061016d9190611fe9565b61045c565b005b34801561018057600080fd5b5061019b60048036038101906101969190611e94565b6106af565b6040516101a89190612494565b60405180910390f35b3480156101bd57600080fd5b506101c66106c7565b6040516101d39190612432565b60405180910390f35b3480156101e857600080fd5b5061020360048036038101906101fe9190611f7c565b610704565b604051610211929190612409565b60405180910390f35b34801561022657600080fd5b5061022f610752565b60405161023c919061220a565b60405180910390f35b34801561025157600080fd5b5061025a610778565b604051610267919061220a565b60405180910390f35b61028a60048036038101906102859190611fa9565b61079e565b005b6102a660048036038101906102a1919061207c565b610ce9565b005b3480156102b457600080fd5b506102cf60048036038101906102ca9190611f7c565b610e6f565b6040516102e29796959493929190612271565b60405180910390f35b61030560048036038101906103009190612029565b610fff565b005b610321600480360381019061031c9190611ec1565b6112ab565b005b34801561032f57600080fd5b5061034a60048036038101906103459190611e94565b61189b565b005b61036660048036038101906103619190611f7c565b6119d5565b005b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000806000806005600086815260200190815260200160002060020160009054906101000a900460ff166103c157600080fd5b6000600560008781526020019081526020016000209050600060046000836000015481526020019081526020016000209050600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16816002015482600501600401548360050160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16955095509550955050509193509193565b6005600083815260200190815260200160002060020160009054906101000a900460ff1661048957600080fd5b60006005600084815260200190815260200160002090506000600460008360000154815260200190815260200160002090506000600660008460000154815260200190815260200160002090508060060160000160009054906101000a900460ff16801561050857508060060160000160019054906101000a900460ff165b801561052557508060060160000160029054906101000a900460ff165b8061057b57508060070160000160009054906101000a900460ff16801561055d57508060070160000160019054906101000a900460ff165b801561057a57508060070160000160029054906101000a900460ff165b5b61058457600080fd5b3373ffffffffffffffffffffffffffffffffffffffff168260050160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146105e357600080fd5b7f587b8bd23b43f29f1f6f1d2d4306080dbcc8f78f1ec918c6812b33001fefc990600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16868460020154878660050160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166040516106679594939291906123b6565b60405180910390a16106a78260050160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168360050160010154611b62565b505050505050565b60006020528060005260406000206000915090505481565b60606040518060400160405280600781526020017f72756e6e696e6700000000000000000000000000000000000000000000000000815250905090565b60008060006006600085815260200190815260200160002090508060060160000160009054906101000a900460ff168160060160000160019054906101000a900460ff169250925050915091565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6006600083815260200190815260200160002060080160009054906101000a900460ff166107cb57600080fd5b3373ffffffffffffffffffffffffffffffffffffffff166006600084815260200190815260200160002060050160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16148061089c57503373ffffffffffffffffffffffffffffffffffffffff166006600084815260200190815260200160002060040160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16145b8061090857503373ffffffffffffffffffffffffffffffffffffffff166006600084815260200190815260200160002060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16145b61091157600080fd5b600060066000848152602001908152602001600020905060018260000b148061093d575060028260000b145b61094657600080fd5b60018260000b1415610acc573373ffffffffffffffffffffffffffffffffffffffff168160050160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156109cf5760018160060160000160016101000a81548160ff021916908315150217905550610ac7565b3373ffffffffffffffffffffffffffffffffffffffff168160040160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610a4c5760018160060160000160006101000a81548160ff021916908315150217905550610ac6565b3373ffffffffffffffffffffffffffffffffffffffff168160030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610ac55760018160060160000160026101000a81548160ff0219169083151502179055505b5b5b610c42565b3373ffffffffffffffffffffffffffffffffffffffff168160050160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610b495760018160070160000160016101000a81548160ff021916908315150217905550610c41565b3373ffffffffffffffffffffffffffffffffffffffff168160040160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610bc65760018160070160000160006101000a81548160ff021916908315150217905550610c40565b3373ffffffffffffffffffffffffffffffffffffffff168160030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610c3f5760018160070160000160026101000a81548160ff0219169083151502179055505b5b5b5b7faa375e4da091ccff030b1bbab9ff345148b4a949b73c7556137af25c7a69057583826001018360060160000160019054906101000a900460ff168015610c9a57508360060160000160009054906101000a900460ff165b8460070160000160019054906101000a900460ff168015610ccc57508460070160000160009054906101000a900460ff165b604051610cdc94939291906124af565b60405180910390a1505050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610d4357600080fd5b60046000848152602001908152602001600020600c0160009054906101000a900460ff16610d7057600080fd5b60018160000b1480610d85575060028160000b145b610d8e57600080fd5b60018160000b1415610dba57816004600085815260200190815260200160002060030181905550610e0b565b81600460008581526020019081526020016000206005016001018190555060016004600085815260200190815260200160002060050160060160006101000a81548160ff0219169083151502179055505b7faf54ca7c1ecf75ea1c151f265e9ab3eeecb27d19e8d3ec6b7e199414dd0c1ed6600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16848484604051610e62949392919061232c565b60405180910390a1505050565b60006060600080600080600060046000898152602001908152602001600020600c0160009054906101000a900460ff16610ea857600080fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600460008a8152602001908152602001600020600001600460008b815260200190815260200160002060010154600460008c815260200190815260200160002060030154600460008d815260200190815260200160002060040154600460008e815260200190815260200160002060050160010154600460008f815260200190815260200160002060050160020154858054610f66906126a3565b80601f0160208091040260200160405190810160405280929190818152602001828054610f92906126a3565b8015610fdf5780601f10610fb457610100808354040283529160200191610fdf565b820191906000526020600020905b815481529060010190602001808311610fc257829003601f168201915b505050505095509650965096509650965096509650919395979092949650565b60046000848152602001908152602001600020600c0160009054906101000a900460ff1661102c57600080fd5b3373ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461108657600080fd5b6006600084815260200190815260200160002060080160009054906101000a900460ff166110b357600080fd5b600860008154809291906110c690612706565b91905055506040518060600160405280848152602001600854815260200160011515815250600560006008548152602001908152602001600020600082015181600001556020820151816001015560408201518160020160006101000a81548160ff021916908315150217905550905050816004600085815260200190815260200160002060050160040181905550806004600085815260200190815260200160002060050160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550806006600085815260200190815260200160002060050160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507fbc1c01dc0d1e366f76a22e7db8af8028033bd0a521feaf529046a6bc413ce0f0600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1660085485858560405161129e9594939291906123b6565b60405180910390a1505050565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461130557600080fd5b6007600081548092919061131890612706565b91905055506040518060e00160405280858152602001848152602001600754815260200160008152602001600081526020016040518060e00160405280600073ffffffffffffffffffffffffffffffffffffffff1681526020016000815260200160008152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160008152602001600081526020016000151581525081526020016001151581525060046000600754815260200190815260200160002060008201518160000190805190602001906113ef929190611d42565b506020820151816001015560408201518160020155606082015181600301556080820151816004015560a08201518160050160008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550602082015181600101556040820151816002015560608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015560c08201518160060160006101000a81548160ff021916908315150217905550505060c082015181600c0160006101000a81548160ff0219169083151502179055509050506040518061012001604052806007548152602001838152602001828152602001600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff1681526020016040518060600160405280600015158152602001600015158152602001600015158152508152602001604051806060016040528060001515815260200160001515815260200160001515815250815260200160011515815250600660006007548152602001908152602001600020600082015181600001556020820151816001019080519060200190611669929190611d42565b506040820151816002019080519060200190611686929190611d42565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060808201518160040160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060a08201518160050160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060c08201518160060160008201518160000160006101000a81548160ff02191690831515021790555060208201518160000160016101000a81548160ff02191690831515021790555060408201518160000160026101000a81548160ff021916908315150217905550505060e08201518160070160008201518160000160006101000a81548160ff02191690831515021790555060208201518160000160016101000a81548160ff02191690831515021790555060408201518160000160026101000a81548160ff02191690831515021790555050506101008201518160080160006101000a81548160ff0219169083151502179055509050507fb7e953e9d5dc29b2595c1ea82eed1d21925712de892f26dd7323f0040bf3f59c33858560075460405161188d9493929190612225565b60405180910390a150505050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461192b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161192290612454565b60405180910390fd5b80600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000806000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555050565b60046000828152602001908152602001600020600c0160009054906101000a900460ff16611a0257600080fd5b3373ffffffffffffffffffffffffffffffffffffffff16600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611a5c57600080fd5b3460046000838152602001908152602001600020600501600101546004600084815260200190815260200160002060030154611a989190612582565b14611aa257600080fd5b34600460008381526020019081526020016000206004018190555034600080600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055507f4ca09f9926d2e48ef31cb6b14dbda230c7420702b8a8f5b878dd572c593e99d233823442604051611b579493929190612371565b60405180910390a150565b600081600080600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015611c07576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611bfe90612474565b60405180910390fd5b81600080600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611c7791906125d8565b92505081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611ccc9190612582565b925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051611d309190612494565b60405180910390a36001905092915050565b828054611d4e906126a3565b90600052602060002090601f016020900481019282611d705760008555611db7565b82601f10611d8957805160ff1916838001178555611db7565b82800160010185558215611db7579182015b82811115611db6578251825591602001919060010190611d9b565b5b509050611dc49190611dc8565b5090565b5b80821115611de1576000816000905550600101611dc9565b5090565b6000611df8611df384612520565b6124fb565b905082815260208101848484011115611e1457611e136127e1565b5b611e1f848285612661565b509392505050565b600081359050611e3681612879565b92915050565b600081359050611e4b81612890565b92915050565b600082601f830112611e6657611e656127dc565b5b8135611e76848260208601611de5565b91505092915050565b600081359050611e8e816128a7565b92915050565b600060208284031215611eaa57611ea96127eb565b5b6000611eb884828501611e27565b91505092915050565b60008060008060808587031215611edb57611eda6127eb565b5b600085013567ffffffffffffffff811115611ef957611ef86127e6565b5b611f0587828801611e51565b9450506020611f1687828801611e7f565b935050604085013567ffffffffffffffff811115611f3757611f366127e6565b5b611f4387828801611e51565b925050606085013567ffffffffffffffff811115611f6457611f636127e6565b5b611f7087828801611e51565b91505092959194509250565b600060208284031215611f9257611f916127eb565b5b6000611fa084828501611e7f565b91505092915050565b60008060408385031215611fc057611fbf6127eb565b5b6000611fce85828601611e7f565b9250506020611fdf85828601611e3c565b9150509250929050565b6000806040838503121561200057611fff6127eb565b5b600061200e85828601611e7f565b925050602061201f85828601611e7f565b9150509250929050565b600080600060608486031215612042576120416127eb565b5b600061205086828701611e7f565b935050602061206186828701611e7f565b925050604061207286828701611e27565b9150509250925092565b600080600060608486031215612095576120946127eb565b5b60006120a386828701611e7f565b93505060206120b486828701611e7f565b92505060406120c586828701611e3c565b9150509250925092565b6120d88161260c565b82525050565b6120e78161261e565b82525050565b6120f68161262a565b82525050565b600061210782612566565b6121118185612571565b9350612121818560208601612670565b61212a816127f0565b840191505092915050565b60008154612142816126a3565b61214c8186612571565b945060018216600081146121675760018114612179576121ac565b60ff19831686526020860193506121ac565b61218285612551565b60005b838110156121a457815481890152600182019150602081019050612185565b808801955050505b50505092915050565b60006121c2602183612571565b91506121cd82612801565b604082019050919050565b60006121e5600e83612571565b91506121f082612850565b602082019050919050565b61220481612657565b82525050565b600060208201905061221f60008301846120cf565b92915050565b600060808201905061223a60008301876120cf565b818103602083015261224c81866120fc565b905061225b60408301856121fb565b61226860608301846121fb565b95945050505050565b600060e082019050612286600083018a6120cf565b818103602083015261229881896120fc565b90506122a760408301886121fb565b6122b460608301876121fb565b6122c160808301866121fb565b6122ce60a08301856121fb565b6122db60c08301846121fb565b98975050505050505050565b60006080820190506122fc60008301876120cf565b61230960208301866121fb565b61231660408301856121fb565b61232360608301846120cf565b95945050505050565b600060808201905061234160008301876120cf565b61234e60208301866121fb565b61235b60408301856121fb565b61236860608301846120ed565b95945050505050565b600060808201905061238660008301876120cf565b61239360208301866121fb565b6123a060408301856121fb565b6123ad60608301846121fb565b95945050505050565b600060a0820190506123cb60008301886120cf565b6123d860208301876121fb565b6123e560408301866121fb565b6123f260608301856121fb565b6123ff60808301846120cf565b9695505050505050565b600060408201905061241e60008301856120de565b61242b60208301846120de565b9392505050565b6000602082019050818103600083015261244c81846120fc565b905092915050565b6000602082019050818103600083015261246d816121b5565b9050919050565b6000602082019050818103600083015261248d816121d8565b9050919050565b60006020820190506124a960008301846121fb565b92915050565b60006080820190506124c460008301876121fb565b81810360208301526124d68186612135565b90506124e560408301856120de565b6124f260608301846120de565b95945050505050565b6000612505612516565b905061251182826126d5565b919050565b6000604051905090565b600067ffffffffffffffff82111561253b5761253a6127ad565b5b612544826127f0565b9050602081019050919050565b60008190508160005260206000209050919050565b600081519050919050565b600082825260208201905092915050565b600061258d82612657565b915061259883612657565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156125cd576125cc61274f565b5b828201905092915050565b60006125e382612657565b91506125ee83612657565b9250828210156126015761260061274f565b5b828203905092915050565b600061261782612637565b9050919050565b60008115159050919050565b60008160000b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b60005b8381101561268e578082015181840152602081019050612673565b8381111561269d576000848401525b50505050565b600060028204905060018216806126bb57607f821691505b602082108114156126cf576126ce61277e565b5b50919050565b6126de826127f0565b810181811067ffffffffffffffff821117156126fd576126fc6127ad565b5b80604052505050565b600061271182612657565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156127445761274361274f565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f6f6e6c79206f776e65722063616e2063616c6c20746869732066756e6374696f60008201527f6e00000000000000000000000000000000000000000000000000000000000000602082015250565b7f42616c616e6365206973206c6f77000000000000000000000000000000000000600082015250565b6128828161260c565b811461288d57600080fd5b50565b6128998161262a565b81146128a457600080fd5b50565b6128b081612657565b81146128bb57600080fd5b5056fea264697066735822122019bdb244b871538827002d251f211237f724d7679a5ac6c0da3df665c84c42d464736f6c63430008070033";

  let contractAddress
  //who is going to deploy the contract
  let ownerPrivateKey = req.body.privateKey;
  let ownerPrivateKeyHex = Buffer.from(ownerPrivateKey, "hex")
  let ownerAddress = req.body._buyerAddr
  let userId = req.body.userId
  let productId = req.body.productId

  //deploy procedure
  var contract = new web3.eth.Contract(HuxtABI)
  const finalData = contract.deploy({
    data: data,
    // arguments: [buyerAddress, ownerAddress],
  });

  const txCount = await web3.eth.getTransactionCount(ownerAddress);

  const txObject = {
    nonce: web3.utils.toHex(txCount),
    gasLimit: web3.utils.toHex(4700000), // Raise the gas limit to a much higher amount
    gasPrice: web3.utils.toHex(web3.utils.toWei("15", "gwei")),
    data: finalData.encodeABI(),
  };

  const tx = new Tx(txObject, { chain: 42 });
  tx.sign(ownerPrivateKeyHex);

  const serializedTx = tx.serialize();
  const raw = "0x" + serializedTx.toString("hex");

  await web3.eth
    .sendSignedTransaction(raw, (err, txHash) => {
      // console.log("trax", txHash);
      txHash = txHash;
    })
    .then((result) => {
      //store the data
      console.log("result", result);
      contractAddress = result.contractAddress;
      let query =
        "INSERT INTO deplyed_product (id,userId, productId, contractAddress) VALUES (?);";
      let data = [null, userId, productId, contractAddress];
      conn.query(
        query,
        [data],
        async (err, result, fields) => {
          if (err) {
            return res.status(200).json({
              msg: TextString.Deployed_Failed,
              status: responseStatus.STATUS_BAD_GATEWAY,
            });
          } else {
            let productUpdateQuery = `UPDATE seller_product SET status ="${1}" WHERE id = '${productId}'`;
            conn.query(productUpdateQuery, async (err, result) => {
              if (err) {
                return res.status(200).send({
                  msg: TextString.Deployed_Failed,
                  data: null,
                  status: responseStatus.STATUS_BAD_GATEWAY,
                });
              } else {
                return res.status(200).send({
                  msg: TextString.Deployed_Successful,
                  data: result,
                  status: responseStatus.STATUS_OK,
                });
              }
            });
          }
        }
      );
    })
    .catch((err) => {
      console.log("eror", err);
      return res.status(200).send({
        msg: TextString.Deployed_Failed,
        data: null,
        status: responseStatus.STATUS_BAD_GATEWAY,
      });
    });
};

const adminLogin = async (req, res, next) => {
  const deploy = async () => {
    try {
      console.log("req=========", req.body);
      const _ownerAdd = req.body.address;

      var minABI = ElectionABI;

      var contractAddress = "0x74c8A2f8eA397aF2A9214536640636cB876875cb";
      var contract = new web3.eth.Contract(minABI, contractAddress, {
        from: _ownerAdd,
      });
      let adminInfo = await contract.methods.adminLogin(_ownerAdd).call();
      console.log("adminInfo", adminInfo);

      if (adminInfo) {
        return res.status(200).send({
          message: "Login Successful",
          data: adminInfo,
        });
      } else {
        return res.status(401).send({
          message: "Login Failed",
          data: null,
        });
      }
    } catch (error) {
      return res.status(401).send({
        message: "Login Failed",
        data: error,
      });
    }
  };
  deploy();
};

const checkHealth = async (req, res, next) => {
  console.log("==========", req.body);
  var minABI = HuxtTechDealABI;

  var contractAddress = "0x74c8A2f8eA397aF2A9214536640636cB876875cb";
  var contract = new web3.eth.Contract(minABI, contractAddress);
  let healthStatus = await contract.methods.health().call();
  console.log("contractSymbol", healthStatus);
  const deploy = async () => {
    try {
      res.json({
        error: false,
        data: {
          message: "API SUCCESSFULLY CALLED",
          data: healthStatus,
        },
      });
    } catch (error) {
      console.log("ERROR", error);
      res.json({ error: true, data: { message: error.message } });
    }
  };
  deploy();
};

const owner = async (req, res, next) => {
  console.log("==========", req.body);
  var minABI = HuxtTechDealABI;

  var contractAddress = "0x74c8A2f8eA397aF2A9214536640636cB876875cb";
  var contract = new web3.eth.Contract(minABI, contractAddress);
  let ownerAddress = await contract.methods.buyerAddr().call();
  console.log("contractSymbol", ownerAddress);
  const deploy = async () => {
    try {
      res.json({
        error: false,
        data: {
          message: "API SUCCESSFULLY CALLED",
          data: ownerAddress,
        },
      });
    } catch (error) {
      console.log("ERROR", error);
      res.json({ error: true, data: { message: error.message } });
    }
  };
  deploy();
};

const sendOrderEvent = async (req, res, next) => {
  let output = { status: null, data: null, msg: null };

  console.log("==========", req.body);
  var minABI = HuxtTechDealABI;

  var contractAddress = "0x74c8A2f8eA397aF2A9214536640636cB876875cb";
  var contract = new web3.eth.Contract(minABI, contractAddress);
  let healthStatus = await contract.methods.health().call();
  console.log("healthStatus", healthStatus);

  await contract
    .getPastEvents(
      "OrderSent",
      {
        filter: { address: ["0x74c8A2f8eA397aF2A9214536640636cB876875cb"] },
        fromBlock: 0,
        toBlock: "latest",
      },
      function (error, events) {}
    )
    .then(function (events) {
      console.log("event=========", events);
      output.data = events[0]["returnValues"];
      output.msg = TextString.Data_Found;
      output.status = responseStatus.STATUS_OK;
    });

  // console.log("contractSymbol", healthStatus);
  const deploy = async () => {
    try {
      res.json({
        output,
      });
    } catch (error) {
      console.log("ERROR", error);
      res.json({ error: true, data: { message: error.message } });
    }
  };
  deploy();
};



module.exports = {
  adminLogin,
  deployContract,
  checkHealth,
  owner,
  sendOrderEvent,
};
